{"foot":"<style name=\"stl_password_reset\"></style>","body": {"minit":"<script>minit('password_reset',['content'], {srefs:['content'],sid:'stl_password_reset'});</script>","misc":"<script>moduleCtx['password_reset']=function(){\n    return {\n        info:null,\n        preI18n : function(o){\n            var s = parseSearch(window.location.search);\n            this.info = s;\n            o.nm = {n:s.n};\n        },\n        doRst : function() {\n            var frm = $('#rstFrm');\n            var data = frm.serializeJSON();\n            \n            getUserNode(info.n, function(ud) {\n                var err = function(d) {\n                    modalError('');\n                }\n                if(rOk(ud)) {\n                    _post(userBase('/admin/', ud.n), {data:'{\"cmd\":6,\"data\":' + JSON.stringify(JSON.stringify({em:info.n,pw:data.npw,tk:info.k})) + '}'}, function(data) {\n                        if(rOk(data)) {\n                            window.location.href = '/login';\n                        } else {\n                            err(data);\n                        }\n                    }, undefined, true);\n                } else {\n                    err(ud);\n                }\n            });\n        },\n        run : function() {\n            var _this = this;\n            var rstFrm = $('#rstFrm');\n            handleError(rstFrm, _this.doRst, ':', function() {\n                var data = rstFrm[0]._sdata || rstFrm.serializeJSON();\n                \n                rstFrm[0]._sdata = data;\n                if(data.npw !== data.npw1) {\n                    var npw = i18nCtx['landing'].reg.pwr;\n                    var perr = i18nCtx['landing'].reg.pwm;\n                    return [{i:$('#npw1'),l:npw,m:perr}];\n                }\n                return null;\n            });\n        }\n    }\n}();</script>","content":"<div class=\"linner\" style=\"text-align:center;\"><div style=\"display:inline-block;text-align:initial;margin-top:50px;\"><h2 style=\"margin-bottom:10px;\">{{info.head}}</h2><div class=\"frmBox\"><form id=\"rstFrm\" action=\"none\" class=\"frm sfrm\"><input style=\"display:none;\" type=\"text\" name=\"login\"><input style=\"display:none;\" type=\"password\" name=\"password\"><div><label>{{rst.info}}</label><label>{{nm.n}}</label></div><div class=\"lgn\"><div><input class=\"full\" name=\"npw\" id=\"npw\" type=\"password\" placeholder=\"{{rst.npw}}\" required=\"\"></div><div><input class=\"full\" name=\"npw1\" id=\"npw1\" type=\"password\" placeholder=\"{{rst.npw1}}\" required=\"\"></div><div style=\"text-align:center;margin:10px 0 10px 0\"><input class=\"full\" type=\"submit\" name=\"doLn\" value=\"{{rst.sub}}\"></div></div><div style=\"clear:both;\"></div></form></div></div></div>"}}