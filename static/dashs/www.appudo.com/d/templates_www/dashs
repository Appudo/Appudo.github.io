{"foot":"<style name=\"stl_dashs\">\n    #add_form {\n        width:100%;\n        text-align:center;\n    }\n    .tlist td:nth-child(1), .tlist th:nth-child(1) {\n        width:45%;\n    }\n    .tlist td:nth-child(2), .tlist th:nth-child(2) {\n        width:35%;\n    }\n    .tlist td:nth-child(3), .tlist th:nth-child(3) {\n        width:20%;\n    }\n</style>","body": {"minit":"<script>minit('dashs',['content'], {srefs:['content'],sid:'stl_dashs'});</script>","misc":"<script>moduleCtx['dashs']=function(){\n    return {\n        upload:{\"foot\":\"<style name=\\\"stl_dash_upload\\\">\\n    #ubox {\\n        background:#fff;\\n        border-radius:2px;\\n        border:1px solid #223560;\\n        height:30px;\\n        text-align:center;\\n        padding-top:5px;\\n        cursor:pointer;\\n        margin-bottom:20px;\\n    }\\n    #ubox.drop {\\n        background:#b0b0b0;\\n    }\\n    .ldiv,.pdiv {\\n        margin: 7px 10px 5px 10px;\\n        display:inline-block; \\n    }\\n    .ldiv {\\n        float:left;\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n        width:17em;\\n    }\\n    .pdiv {\\n        overflow:hidden; \\n        white-space:nowrap; \\n        text-overflow: ellipsis;\\n        width:75%;\\n    }\\n    #progOuter {\\n        position:relative;\\n        padding:0;\\n        background:#ffffff;\\n        border:1px solid #ddd;\\n        border-radius:4px;\\n        margin-top:10px;\\n        text-align:center;\\n        height:30px;\\n    }\\n    #progPercent {\\n        position:absolute;\\n        left:0;\\n        display: inline-block;\\n        line-height: 30px;\\n        vertical-align: bottom;\\n        width:100%;\\n        height:100%;\\n        white-space:nowrap;\\n        overflow:hidden;\\n        text-overflow:ellipsis;\\n    }\\n    #progInner {\\n        position:absolute;\\n        left:0;\\n        display:inline-block;\\n        width:30px;\\n        height:100%;\\n        padding:0;\\n        border-radius:4px;\\n        background: #457edb;\\n        box-shadow:0 -1px 0 2px #3e6dbb inset, 0 3px 4px rgba(0, 0, 0, 0.3), 0 3px rgba(255, 255, 255, 0.38) inset;\\n        -webkit-box-shadow:0 -1px 0 2px #3e6dbb inset, 0 3px 4px rgba(0, 0, 0, 0.3), 0 3px rgba(255, 255, 255, 0.38) inset;\\n        -moz-box-shadow:0 -1px 0 2px #3e6dbb inset, 0 3px 4px rgba(0, 0, 0, 0.3), 0 3px rgba(255, 255, 255, 0.38) inset;\\n    }\\n    #dUpldFrm label {\\n        max-width:161px;\\n    }\\n</style>\",\"body\": {\"minit\":\"<script>minit('dash_upload',['modalLayer','add_form'], {srefs:['modalLayer','add_form'],sid:'stl_dash_upload'});<\\/script>\",\"misc\":\"<script>moduleCtx['dash_upload']=function(){\\n    return {\\n        nosel:true,\\n        files:{},\\n        cFile:null,\\n        progress:null,\\n        end:null,\\n        unload : function() {\\n            this.finish();\\n        },\\n        finish : function() {\\n            if(this.end) {\\n                 this.end();\\n                 this.end = null;\\n            }\\n        },\\n        doValidate : function(pdata, o, after) {\\n            postCredsCross(o, userBase('/server/', o.name), {data:'{\\\"cmd\\\":8,\\\"data\\\":' + JSON.stringify(JSON.stringify(pdata)) + '}',tk:o.tk}, after);\\n        },\\n        rstFrm : function(frm) {\\n\\t\\t    enableMain();\\n            frm[0].reset();\\n        },\\n        doError : function(msg) {\\n            if(this.remPending)\\n                this.remPending();\\n            this.finish();\\n\\t\\t    enableMain();\\n\\t\\t    if(msg)\\n\\t\\t        modalError(msg);\\n        },\\n        validateFrm : function(frm) {\\n            var _this = this;\\n            var data = frm._sdata || frm.serializeJSON();\\n            \\n            /* do cross login to node */\\n            crossLoginKeep(data.tn, function(d, end) {\\n                _this.end = end;\\n                if(d) {\\n                    _this.doRegister.call(_this, data, d);\\n                } else {\\n                    _this.doError();\\n                }\\n            });\\n        },\\n        showProgress : function (v) {\\n            if(v)\\n            {\\n                $('#progPercent')[0].innerText = '0%';\\n                setModal();\\n            } else {\\n                unsetModal();\\n            }\\n            \\n            $('#theUpload').css('display', v ? 'block' :'none');\\n        },\\n        setProgress : function(v) {\\n            v = Math.round(v);\\n            this.progress.p[0].innerText = v + '%';\\n            this.progress.i.css('width', Math.round((this.progress.o.width()*v)/100) + 'px');\\n        },\\t\\n        errSubmit : function(data) {\\n            var i18n = this.i18n.upl;\\n            this.doError(i18n.ufail);\\n        },\\n        finSubmit : function() {\\n\\t\\t    this.setProgress(100);\\n\\t\\t    this.showProgress(false);\\n\\t\\t    this.rstFrm($('#dUpldFrm'));\\n\\t\\t\\tthis.finish();\\n        },      \\n        doSubmit : function(data, o, rdata) {\\n            var _this = this;\\n            var i18n = this.i18n.upl;\\n            var after = function(res) {\\n                delete data['upr'];\\n                if(res.r == 0) {\\n                    _this.doUpload.call(_this, data, o, rdata);\\n                } else {\\n                    _this.doError(i18n.vfail);\\n                }\\n            };\\n            var hf = _this.files.ssk || _this.files.ssc || _this.files.pkg;\\n            if(hf) {\\n                _this.doValidate.call(_this, {an:data.an,dn:data.dn,sn:data.sn,on:data.on,se:data.se,eo:data.eo}, o, after);\\n            } else {\\n                after({r:0});\\n            }\\n        },\\n        doRegister : function(fdata, o) {\\n            var _this = this;\\n            var i18n = this.i18n.upl;\\n            /* register with user dash */\\n            postCreds(userBase('/admin/'), {data:'{\\\"cmd\\\":11, \\\"data\\\":' + JSON.stringify(JSON.stringify({n:fdata.an,ds:fdata.dsc,tn:parseInt(fdata.tn)})) + '}'}, function(data) {\\n                if(data.r == 0) {\\n                    if(_this.addPending)\\n                        _this.addPending(parseInt(data.id));\\n                    if(fdata.nn == '')\\n                        fdata.nn = i18n.ukn;\\n                    data.nn = fdata.nn;\\n                    fdata.on = mainCtx.linfo.m;\\n                    fdata.eo = \\\"1\\\";\\n                    fdata.af = \\\"1\\\";\\n                    fdata.an = data.n;\\n                    fdata.dn = userBaseRaw('', '', data.n);\\n                    delete fdata.nn;\\n                    /* send request to node */\\n    \\t            _this.doSubmit.call(_this, fdata, o, data);\\n                } else {\\n                    _this.doError(i18n.rfail);\\n                }\\n            });\\n        },\\n        doUpload : function(fdata, o, rdata) {\\n            this.setProgress(0);\\n            this.showProgress(true);\\n            var _this = this;\\n\\t\\t\\tvar fd = new FormData();\\n\\t\\t\\tfd.append('data', JSON.stringify({cmd:2,data:JSON.stringify(fdata)}));\\n\\t\\t\\tfd.append('tk', o.tk);\\n\\t\\t\\tconsole.log(this.files);\\n\\t\\t\\tif(this.files.ssk) {\\n\\t\\t\\t    fd.append('name', 'ssk');\\n\\t\\t\\t    fd.append('ssk', this.files.ssk);\\n\\t\\t\\t}\\n\\t\\t\\tif(this.files.ssc) {\\n\\t\\t\\t    fd.append('name', 'ssc');\\n\\t\\t\\t    fd.append('ssc', this.files.ssc);\\n\\t\\t\\t}\\n\\t\\t\\tif(this.files.pkg) {\\n\\t\\t\\t    fd.append('name', 'pkg');\\n\\t\\t\\t    fd.append('pkg', this.files.pkg);\\n\\t\\t\\t}\\n\\t        var xhr = new XMLHttpRequest();\\n\\t        var stop = $('#abt');\\n            \\n            stop.unbind('click');\\n            stop.click(function(e) {\\n                e.preventDefault(); \\n                xhr.abort();\\n            });\\n            \\n\\t        xhr.upload.addEventListener('progress', function(e) {\\n\\t        \\tif(e.lengthComputable) {\\n\\t        \\t\\tvar p = (e.loaded * 100 / (e.total));\\n\\t        \\t\\t_this.setProgress.call(_this, p);\\n\\t        \\t}\\n\\t        }, false);\\n\\t        \\n\\t        var doPost = function() {\\n                xhr.open('POST', userBase('/server/', o.name), true);\\n    \\t        xhr.send(fd);\\n\\t        }\\n\\t        \\n\\t        xhr.addEventListener('load', function() {\\n\\t            var response = {r:-1};\\n\\t\\t\\t\\tvar ioArgs = xhr.ioArgs;\\n\\t            if(xhr.status == 200) {  \\n\\t                var response = validateRes(xhr.responseText, true);\\n                    if(!response) {\\n                        _this.doError();\\n                        return;\\n                    }\\n\\t            }\\n\\t\\t\\t\\tif(response.r != 0)\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t    if(response.l) {\\n                        crossLogin(o.id, function(d) {\\n                            if(d) {\\n                                o = d;\\n                                fd.set('tk', o.tk);\\n\\t\\t\\t\\t                doPost();\\n                            } else {\\n                                _this.doError();\\n                            }\\n                        }, true);\\n\\t\\t\\t\\t        return;\\n\\t\\t\\t\\t    }\\n\\t\\t\\t\\t    _this.errSubmit.call(_this, response);\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t        _this.finSubmit.call(_this);\\n                    if(_this.onAdd) {\\n                        _this.onAdd(fdata, rdata);\\n                    }\\n\\t\\t\\t\\t}\\n\\t        }, false);\\n\\t        xhr.addEventListener('error', function() {\\n\\t\\t        _this.errSubmit.call(_this);\\n\\t        }, false);\\n\\t        xhr.addEventListener('abort', function() {\\n\\t\\t        enableMain();\\n                if(_this.remPending)\\n                    _this.remPending();\\n\\t\\t\\t\\t_this.showProgress.call(_this, false);\\n\\t        }, false);\\n\\t        \\n\\t        doPost();\\n        },\\n    \\thandleFiles : function(items, idx) {\\n        \\tvar _this = this;\\n            var i18n = this.i18n.upl;\\n    \\t    if(items) {\\n    \\t        if(idx < items.length) {\\n        \\t        var theFile = $('#theFile');\\n        \\t        var file = items[idx];\\n        \\t        cFile = file;\\n    \\t            theFile.off('onFileReady');\\n    \\t            theFile.on('onFileReady', function() {\\n    \\t                _this.handleFiles.call(_this, items, idx + 1);\\n                    });\\n        \\t        $('#theFile').css('display', 'block');\\n        \\t        setModal();\\n        \\t        $('#flval').text(file.name);\\n    \\t        }\\n    \\t    } else {\\n                _this.doError(i18n.ffail);\\n    \\t    }\\n    \\t},\\n        parseFileList : function(list) {\\n            var info = {};\\n            var result = [];\\n\\t\\t\\tfor(var i = 0, len = list.length; i < len; i++) {\\n\\t\\t\\t\\tif(list[i].webkitGetAsEntry && list[i].kind=='file') {\\n\\t\\t\\t\\t\\tvar item = list[i].webkitGetAsEntry();\\n\\t\\t\\t\\t\\tif(item) {\\n\\t\\t\\t\\t\\t\\tthis.parseFiles(info, item,result);\\n\\t\\t\\t\\t\\t\\tif(info.error)\\n\\t\\t\\t\\t\\t\\t    return null;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\treturn info.error ? null : result;\\n\\t\\t},\\n    \\tparseFiles : function(info, item, result) {\\n        \\tvar _this = this;\\n    \\t    if(info.error)\\n    \\t        return;\\n\\t\\t\\tif(item.isFile) {\\n\\t\\t\\t    result.push(item);\\n\\t\\t\\t} else \\n\\t\\t\\tif(item.isDirectory) {\\n\\t\\t\\t\\tvar rd = item.createReader();\\n\\t\\t    \\trd.readEntries(function(items, a) {\\n\\t\\t\\t\\t\\tif(items.length != 0) {\\n    \\t\\t\\t\\t\\tvar l = [];\\n    \\t\\t\\t\\t\\tfor(var i = 0, len = items.length; i< len; i++) {\\n    \\t\\t\\t\\t\\t    _this.parseFiles(info, items[i], result);\\n    \\t\\t\\t\\t\\t    if(info.error)\\n    \\t\\t\\t\\t\\t        return;\\n    \\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}, function(){\\n\\t\\t\\t\\t    info.error = true;\\n\\t\\t\\t\\t    /* doUploadEnd(info);  */\\n\\t\\t\\t\\t});\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tupdFiles : function() {\\n\\t\\t    var pf = this.files.pkg;\\n\\t\\t    var ck = this.files.ssk;\\n\\t\\t    var cc = this.files.ssc;\\n\\t\\t    var no = this.i18n.frm.no;\\n\\t\\t    $('#pf').text(pf ? pf.name : no);\\n\\t\\t    $('#ck').text(ck ? ck.name : no);\\n\\t\\t    $('#cc').text(cc ? cc.name : no);\\n\\t\\t},\\n        hide : function() {\\n            this.onUnload(true);\\n        },\\n        nodeClose : function(e) {\\n            var _this = e.data.ctx;\\n            if ($(e.target).closest(\\\"#nodeSearch\\\").length === 0 && e.target != $('#nodeBtn')[0]) {\\n                $(document).off('click', _this.nodeClose);\\n                _this.showSearch('node', true);\\n            }\\n        },\\n        sslClose : function(e) {\\n            var _this = e.data.ctx;\\n            if ($(e.target).closest(\\\"#sslSearch\\\").length === 0 && e.target != $('#sslBtn')[0]) {\\n                $(document).off('click', _this.sslClose);\\n                _this.showSearch('ssl', true);\\n            }\\n        },\\n        showSearch : function(ty, off) {\\n            var s = $('#' + ty + 'Search');\\n            \\n            if(!s.hasClass('block')) {\\n                s.toggleClass('block');\\n                $(document).on('click', {ctx:this}, this[ty + 'Close']);\\n                var b = $('#' + ty + 'Btn');\\n                var bo = b.offset();\\n                s.css('left', bo.left);\\n                s.css('top', bo.top + b.outerHeight());\\n                if(s.offset().left + s.outerWidth() > $(window).width()) {\\n                    s.css('left', bo.left + b.outerWidth() - s.width());\\n                }\\n                $('#' + ty + 'Input').focus();\\n            }\\n            \\n            if(off)\\n                s.toggleClass('block');\\n        },\\n        filterSearch : function(ty) {\\n            console.log('filter')\\n            var input, filter, ul, li, a, i;\\n            input = $('#' + ty + 'Input');\\n            filter = input.val().toUpperCase();\\n            div = $('#' + ty + 'Search');\\n            a = div[0].getElementsByTagName(\\\"a\\\");\\n            for (i = 0; i < a.length; i++) {\\n                if (a[i].innerHTML.toUpperCase().indexOf(filter) > -1) {\\n                    a[i].style.display = \\\"\\\";\\n                } else {\\n                    a[i].style.display = \\\"none\\\";\\n                }\\n            }\\n        },\\n        run : function() {\\n            var _this = this; \\n            var i18n = this.i18n.upl;\\n            var frm = $('#dUpldFrm');\\n            var theFile = $('#theFile');\\n            this.progress = {o:$('#progOuter'),i:$('#progInner'),p:$('#progPercent')};\\n               \\n            $('#abrt').click(function(){_this.hide.call(_this);});\\n            $('#nodeBtn').click(function(e){_this.showSearch.call(_this, 'node');});\\n            $('#sslBtn').click(function(e){_this.showSearch.call(_this, 'ssl');});\\n            $('#nodeSBtn').click(function(){_this.filterSearch.call(_this, 'node');});\\n            $('#sslSBtn').click(function(){_this.filterSearch.call(_this, 'ssl');});\\n            \\n            handleError(frm, function() {\\n\\t\\t        disableMain();\\n                _this.validateFrm.call(_this, frm);\\n            }, '', function() {\\n                var errs = [];\\n                var data = frm[0]._sdata || frm.serializeJSON();\\n                frm[0]._sdata = data;\\n                \\n                var lbl;\\n                \\n                if(data.up != data.upr) {\\n    \\t            lbl = $('label[for=upr]').text();\\n                    errs.push({i:$('#upr'),l:lbl, m:i18n.epwm});\\n                }\\n                if(data.di && data.ds == '') {\\n    \\t            lbl = $('label[for=ds]').text();\\n                    errs.push({i:$('#ds'),l:lbl, m:i18n.edsk});\\n                }\\n                if(data.se && data.sn == '') {\\n    \\t            lbl = $('label[for=se]').text();\\n                    errs.push({i:$('#se'),l:lbl, m:i18n.essln});\\n                }\\n                if(data.se) {\\n                    if(!data.sc && (!_this.files.ssk || !_this.files.ssc)) {\\n                        if(!_this.files.ssk) {\\n            \\t            lbl = $('label[for=ck]').text();\\n                            errs.push({i:$('#ssk'),l:lbl, m:i18n.esslf});\\n                        }\\n                        if(!_this.files.ssc) {\\n            \\t            lbl = $('label[for=cc]').text();\\n                            errs.push({i:$('#ssk'),l:lbl, m:i18n.esslf});\\n                        }\\n                    }\\n                } else\\n                if(_this.files.ssk || _this.files.ssc) {\\n                    if(_this.files.ssk) {\\n        \\t            lbl = $('label[for=ck]').text();\\n                        errs.push({i:$('#ssk'),l:lbl, m:i18n.esslnf});\\n                    }\\n                    if(_this.files.ssc) {\\n        \\t            lbl = $('label[for=cc]').text();\\n                        errs.push({i:$('#ssk'),l:lbl, m:i18n.esslnf});\\n                    }\\n                }\\n                \\n                if(data.eo && data.on == '') {\\n    \\t            lbl = $('label[for=on]').text();\\n                    errs.push({i:$('#on'),l:lbl, m:i18n.eon});\\n                }\\n                \\n                return errs;\\n            });\\n            \\n            var cluf = function() {\\n                theFile.css('display', 'none');\\n                unsetModal();\\n                cFile = null;\\n                _this.updFiles.call(_this);\\n    \\t        theFile.trigger('onFileReady');\\n            }\\n            $('#ssk').click(function(e) {\\n                e.preventDefault(); \\n                _this.files.ssk = cFile;\\n                cluf();\\n            });\\n            $('#ssc').click(function(e) {\\n                e.preventDefault(); \\n                _this.files.ssc = cFile;\\n                cluf();\\n            });\\n            $('#pkg').click(function(e) {\\n                e.preventDefault(); \\n                _this.files.pkg = cFile;\\n                cluf();\\n            });\\n            $('#non').click(function(e) {\\n                e.preventDefault(); \\n                cluf();\\n            });\\n            \\n            var dropBox = $('#ubox');  \\n            \\n            var file = $('input[type=\\\"file\\\"]');\\n            file.on('change', function(e) {\\n                _this.handleFiles.call(_this, file[0].files, 0);\\n            });\\n            dropBox.on('click', function() {\\n                file.trigger('click');\\n            });\\n            \\n            dropBox[0].ondrop = function(e) {\\n                e.preventDefault();  \\n                dropBox.removeClass('drop');\\n                if(!e.dataTransfer) {\\n                    return false;\\n                }\\n                var items;\\n                if ((items = e.dataTransfer.items)) {\\n                } else \\n                if((items = e.dataTransfer.files)){\\n                } else {\\n                    return false;\\n                }\\n                \\n                var farr = _this.parseFileList.call(_this, items);\\n                \\n                var fileData = function(items, idx, result, after) {\\n                    if(idx < items.length) {\\n        \\t\\t\\t    items[idx].file(function(file) {\\n        \\t\\t\\t        result.push(file);\\n    \\t\\t\\t\\t\\t    fileData(items, idx + 1, result, after);\\n    \\t\\t\\t\\t\\t}, function(){\\n    \\t\\t\\t\\t\\t    after(null);\\n    \\t\\t\\t\\t\\t});\\n                    } else {\\n                        after(result);\\n                    }\\n                }\\n                \\n                fileData(farr, 0, [], function(r) {\\n                    _this.handleFiles.call(_this, r, 0);\\n                });\\n                \\n            } \\n            \\n            dropBox[0].ondragover = function(e) {\\n                e.preventDefault();\\n                dropBox.addClass('drop');\\n            }\\n            \\n            dropBox[0].ondragleave = function(e) {\\n                e.preventDefault();\\n                dropBox.removeClass('drop');\\n            }\\n        }\\n    }\\n}();<\\/script>\",\"modalLayer\":\"<div id=\\\"theUpload\\\" style=\\\"display:none;\\\" class=\\\"modal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"uploadModal\\\" aria-hidden=\\\"true\\\"><div class=\\\"dlg\\\"><div class=\\\"ltop\\\"><span>{{prg.lbl}}<\\/span><\\/div><div><div id=\\\"progOuter\\\"><div id=\\\"progInner\\\"><\\/div><span id=\\\"progPercent\\\"><\\/span><\\/div><\\/div><div style=\\\"clear:both;\\\"><\\/div><div class=\\\"frm btn\\\" style=\\\"margin-right:0;\\\"><button style=\\\"float:right;\\\" type=\\\"button\\\" name=\\\"abt\\\" id=\\\"abt\\\">{{prg.abt}}<\\/button><\\/div><\\/div><\\/div><div id=\\\"theFile\\\" style=\\\"display:none;\\\" class=\\\"modal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"fileModal\\\" aria-hidden=\\\"true\\\"><div class=\\\"dlg\\\"><div class=\\\"ltop\\\"><span>{{afl.sel}}<\\/span><\\/div><div class=\\\"frm btn\\\"><div style=\\\"display:inline-block;margin-top:-10px;width:100%;\\\"><label style=\\\"display:inline-block;overflow: hidden;\\\">{{afl.fl}}:<\\/label><div id=\\\"flval\\\" class=\\\"pdiv\\\"><\\/div><\\/div><div style=\\\"clear:both;\\\"><\\/div><button type=\\\"button\\\" name=\\\"ssk\\\" id=\\\"ssk\\\">{{afl.key}}<\\/button><span style=\\\"width:20px;display:inline-block;\\\"><\\/span><button type=\\\"button\\\" name=\\\"ssc\\\" id=\\\"ssc\\\">{{afl.crt}}<\\/button><span style=\\\"width:20px;display:inline-block;\\\"><\\/span><button type=\\\"button\\\" name=\\\"pkg\\\" id=\\\"pkg\\\">{{afl.pkg}}<\\/button><span style=\\\"width:20px;display:inline-block;\\\"><\\/span><button type=\\\"button\\\" name=\\\"non\\\" id=\\\"non\\\">{{afl.non}}<\\/button><\\/div><\\/div><\\/div>\",\"add_form\":\"<div id=\\\"nodeSearch\\\" class=\\\"searchContent\\\"><form onsubmit=\\\"return false;\\\" class=\\\"frm\\\"><div><input type=\\\"text\\\" placeholder=\\\"{{frm.nsrh}}\\\" id=\\\"nodeInput\\\" class=\\\"search\\\"><button type=\\\"submit\\\" id=\\\"nodeSBtn\\\">{{frm.srh}}<\\/button><\\/div><\\/form><a href=\\\"#about\\\">About<\\/a><a href=\\\"#base\\\">Base<\\/a><a href=\\\"#blog\\\">Blog<\\/a><a href=\\\"#contact\\\">Contact<\\/a><a href=\\\"#custom\\\">Custom<\\/a><a href=\\\"#support\\\">Support<\\/a><a href=\\\"#tools\\\">Tools<\\/a><\\/div><div id=\\\"sslSearch\\\" class=\\\"searchContent\\\"><form onsubmit=\\\"return false;\\\" class=\\\"frm\\\"><div><input type=\\\"text\\\" placeholder=\\\"{{frm.ssrh}}\\\" id=\\\"sslInput\\\" class=\\\"search\\\"><button type=\\\"submit\\\" id=\\\"sslSBtn\\\">{{frm.srh}}<\\/button><\\/div><\\/form><a href=\\\"#about\\\">About<\\/a><a href=\\\"#base\\\">Base<\\/a><a href=\\\"#blog\\\">Blog<\\/a><a href=\\\"#contact\\\">Contact<\\/a><a href=\\\"#custom\\\">Custom<\\/a><a href=\\\"#support\\\">Support<\\/a><a href=\\\"#tools\\\">Tools<\\/a><\\/div><div><div class=\\\"htop\\\"><h1>{{upl.head}}<\\/h1><\\/div><div class=\\\"frmBox\\\"><form id=\\\"dUpldFrm\\\" class=\\\"frm min\\\"><div class=\\\"box1\\\" style=\\\"float:left;\\\"><input type=\\\"text\\\" style=\\\"display:none\\\"><input type=\\\"password\\\" style=\\\"display:none\\\"><div class=\\\"searchFrame\\\" style=\\\"float:right;\\\"><button id=\\\"nodeBtn\\\" class=\\\"searchBtn\\\" type=\\\"button\\\">▼<\\/button><\\/div><label style=\\\"clear:none;\\\" for=\\\"tn\\\">{{frm.tn}}*:<\\/label><input type=\\\"text\\\" id=\\\"tn\\\" name=\\\"tn\\\" style=\\\"width:16em;\\\" pattern=\\\"[+-]?[0-9]{1,10}\\\" required=\\\"\\\"><input type=\\\"text\\\" id=\\\"nn\\\" name=\\\"nn\\\" style=\\\"display:none;\\\"><label for=\\\"un\\\">{{frm.un}}*:<\\/label><input type=\\\"text\\\" id=\\\"un\\\" name=\\\"un\\\" required=\\\"\\\"><label for=\\\"up\\\">{{frm.up}}*:<\\/label><input type=\\\"password\\\" id=\\\"up\\\" name=\\\"up\\\" required=\\\"\\\"><label for=\\\"upr\\\">{{frm.upr}}*:<\\/label><input type=\\\"password\\\" id=\\\"upr\\\" name=\\\"upr\\\" required=\\\"\\\"><label for=\\\"dsc\\\">{{frm.dsc}}:<\\/label><div style=\\\"margin:0 10px 0 10px;\\\"><textarea id=\\\"dsc\\\" name=\\\"dsc\\\" style=\\\"height:60px\\\"><\\/textarea><\\/div><label>{{frm.ao}}:<\\/label><div style=\\\"clear:both;\\\"><\\/div><div class=\\\"noclear\\\"><label for=\\\"ac\\\">{{frm.ac}}<\\/label><input type=\\\"checkbox\\\" id=\\\"ac\\\" name=\\\"ac\\\" value=\\\"ac\\\" checked=\\\"\\\"><label for=\\\"ed\\\">{{frm.ed}}<\\/label><input type=\\\"checkbox\\\" id=\\\"ed\\\" name=\\\"ed\\\" value=\\\"ed\\\"><label for=\\\"ma\\\">{{frm.ma}}<\\/label><input type=\\\"checkbox\\\" id=\\\"ma\\\" name=\\\"ma\\\" value=\\\"ma\\\"><label for=\\\"di\\\">{{frm.di}}<\\/label><input type=\\\"checkbox\\\" id=\\\"di\\\" name=\\\"di\\\" value=\\\"di\\\"><\\/div><label for=\\\"ds\\\">{{frm.ds}} (MB):<\\/label><input type=\\\"text\\\" id=\\\"ds\\\" name=\\\"ds\\\" pattern=\\\"[0-9]*\\\"><\\/div><div class=\\\"box2\\\" style=\\\"float:left;\\\"><label for=\\\"pp\\\">{{frm.pp}}:<\\/label><input type=\\\"text\\\" id=\\\"pp\\\" name=\\\"pp\\\"><div style=\\\"clear:both;margin-bottom:5px;\\\"><\\/div><input type=\\\"file\\\" style=\\\"display: none\\\"><div id=\\\"ubox\\\">\\n                        {{frm.drop}}\\n                    <\\/div><label for=\\\"pf\\\">{{frm.pf}}:<\\/label><div id=\\\"pf\\\" class=\\\"ldiv\\\">{{frm.no}}<\\/div><label for=\\\"cc\\\">{{frm.cc}}:<\\/label><div id=\\\"cc\\\" class=\\\"ldiv\\\">{{frm.no}}<\\/div><label for=\\\"ck\\\">{{frm.ck}}:<\\/label><div id=\\\"ck\\\" class=\\\"ldiv\\\">{{frm.no}}<\\/div><label for=\\\"sc\\\">{{frm.sc}}<\\/label><input type=\\\"checkbox\\\" id=\\\"sc\\\" name=\\\"sc\\\" value=\\\"sc\\\"><label for=\\\"sn\\\">{{frm.sn}}:<\\/label><div class=\\\"searchFrame\\\" style=\\\"float:right;\\\"><button id=\\\"sslBtn\\\" class=\\\"searchBtn\\\" type=\\\"button\\\">▼<\\/button><\\/div><input style=\\\"width:16em;\\\" type=\\\"text\\\" id=\\\"sn\\\" name=\\\"sn\\\"><label for=\\\"se\\\">{{frm.se}}<\\/label><input type=\\\"checkbox\\\" id=\\\"se\\\" name=\\\"se\\\" value=\\\"se\\\"><div style=\\\"clear:both;\\\"><\\/div><div style=\\\"margin-top:20px;\\\"><input type=\\\"submit\\\" style=\\\"float:right;margin-top:10px;margin-right:10px\\\" value=\\\"{{frm.sub}}\\\"><input type=\\\"button\\\" id=\\\"abrt\\\" style=\\\"float:right;margin-top:10px;margin-right:10px\\\" value=\\\"{{frm.cls}}\\\"><\\/div><\\/div><\\/form><div style=\\\"clear:both;\\\"><\\/div><\\/div><\\/div>\"}},\n        ipp:10,\n        max:0,\n        page:1,\n        order:null,\n        filter1:null,\n        filter2:null,\n        filter3:null,\n        hasAdd:false,\n        unloadAdd:null,\n        pending:null,\n        unload:function() {\n            if(this.hasAdd && this.unloadAdd)\n               this.unloadAdd();\n        },\n        showAdd : function(after) {\n            var _this = this;\n            var i18n = this.i18n.info;\n            this._showAdd(function(unload) {\n                _this.unloadAdd = unload;\n                $('html, body').animate({\n                    scrollTop: $(\"#add_form\").offset().top - hdrHeight - 10\n                }, 200);\n                \n                var mctx = moduleCtx['dash_upload'];\n                \n                mctx.onAdd = function(d, r) {\n                    _this.pending = null;\n                    _this.renderRow({id:r.id,n:r.nn,nm:r.n,nid:d.tn,d:d.dsc}, true);\n                    _this.selItem(r.id);\n                    modalInfo(i18n.aok);\n                }\n                \n                mctx.addPending = function(id) {\n                    _this.pending = id;\n                }\n                \n                mctx.remPending = function() {\n                    if(_this.pending) {\n                        _this.doUnreg(_this.pending, false);\n                    }\n                }\n                \n                if(after)\n                    after();\n            });\n        },\n        _showAdd : function(after) {\n            var _this = this;\n            if(!this.hasAdd) {\n                this.hasAdd = true;\n                loadContent('dash_upload', this.upload, 'onUnload', after, function(active) { \n                    if(active) {\n                        var params = parseSearch();\n                        delete params.n;\n                        delete params.nid;\n                        putSearchMenu(params);\n                    }\n                    _this.hasAdd = false;\n                    $('html, body').animate({\n                        scrollTop: 0\n                    }, 200);\n                });\n            }\n        },     \n        renderPages : function() {\n            var i18n = this.i18n.menu;\n            var itemsPerPage = this.ipp;\n            var thePage = this.page;\n            var offset = (thePage-1)*itemsPerPage\n            var numItems = this.max + offset\n            var numPages = Math.floor(numItems / itemsPerPage) + (numItems % itemsPerPage != 0 ? 1 : 0)\n            var data = '<span>' + i18n.pg + ' (' + numPages + '):</span>';\n            var lnk = '<a href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'setPage\\',[\\'';\n            \n            data += '<div class=\"pmi\">';\n            if(thePage != 1) {\n                data += lnk + '1\\'])\">' + i18n.frt + '</a>';\n                data += lnk + (thePage - 1) + '\\'])\">' + i18n.prv + '</a>';\n            } else {\n                data += '<span class=\"dbl\">' + i18n.frt + '</span>';\n                data += '<span class=\"dbl\">' + i18n.prv + '</span>';\n            }\n            data += '</div>';\n            \n            var begin = thePage - 2\n            \n            if(begin <= 0) {\n                begin = 1\n            }\n            \n            let upper = begin + 5\n            \n            data += '<div class=\"pmi pmim\">';\n            for(var i = begin; i < upper; i++) {\n                if(i > numPages) {\n                    break\n                }\n                \n                if(i != thePage) {\n                    data += lnk + i + '\\'])\">' + i + '</a>';\n                } else {\n                    data += '<span class=\"cur\">' + thePage + '</span>';\n                }\n            }\n            data += '</div>';\n            \n            data += '<div class=\"pmi\">';\n            if(thePage != numPages) {\n                data += lnk + (thePage + 1) + '\\'])\">' + i18n.nxt + '</a>';\n                data += lnk + numPages + '\\'])\">' + i18n.lst + '</a>';\n            } else {\n                data += '<span class=\"dbl\">' + i18n.nxt + '</span>';\n                data += '<span class=\"dbl\">' + i18n.lst + '</span>';\n            }\n            data += '</div>';\n            \n            $('.pmenu').html(data);\n        },\n        renderIPP : function() {\n            var _this = this;\n            var i18n = this.i18n.menu;\n            var info = this.i18n.info;\n            var num = [1, 10, 20, 30, 50, 100, 200];\n            $('#tmenu').text('');\n            var data = '<tr class=\"filter frm btnBox tfm\"><td colspan=\"3\" class=\"smenu\">';\n                data += '<span>' + i18n.ipp + ':</span>'\n            for(var i = 0; i < num.length; i++) {\n                var n = num[i];\n                data += '<a href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'setIPP\\',[\\'' + n + '\\']);\">' + n + '</a>';\n            }\n            data += '</td></tr>' +\n                       '<tr class=\"filter frm btnBox\"><td colspan=\"3\">' + \n                       '<button type=\"button\">' + info.cl + '</button></td></tr>';\n            var e = $('#tmenu').append(data);\n            var btns = e.find('button');\n            $(btns[0]).click(function(e){e.preventDefault();_this.renderMenu.call(_this);});\n        },\n        buildOrder : function(idx, o) {\n            if(!o || (o >> 1) - 1 != idx)\n                return '<a href=\"#\"><span class=\"fbtn\">&#9650;&#9660;</span></a>';\n            \n            return '<a href=\"#\"><span class=\"fbtn\">' + ((o & 1) == 0 ? '&#9650;' : '&#9660;') + '</span></a>';\n        },\n        renderOrder : function(obj) {\n            var _this = this;\n            var hrefs = $('#tmenu').find('a');\n            for(var i = 0; i < hrefs.length; i++) {\n                $(hrefs[i]).replaceWith(this.buildOrder(i, obj.o));\n            }\n            hrefs = $('#tmenu').find('a');\n            var v = [];\n            for(var i = 0; i < hrefs.length; i++) {\n                (function(i, o) {\n                    var n = (o >> 1) - 1 != i;\n                    var ov = (i + 1) << 1;\n                    if(!n) {\n                        if((o & 1))\n                            ov = 0;\n                        else\n                            ov |= 1;\n                    }\n                    $(hrefs[i]).click(function(e){\n                        e.preventDefault();\n                        obj.o = ov;\n                        _this.renderOrder(obj);\n                    });\n                })(i, obj.o);\n            }\n        },\n        renderFilter : function() {\n            var _this = this;\n            var i18n = this.i18n.menu;\n            var info = this.i18n.info;\n            $('#tmenu').text('');\n            var data = '<tr class=\"filter frm btnBox tfm\"><td><input type=\"text\" placeholder=\"' + info.n  + '...\"><a/></td>' + \n                       '<td><input type=\"text\" placeholder=\"' + info.dsc  + '...\"><a/></td>' + \n                       '<td><input type=\"text\" placeholder=\"' + info.nn  + '...\"><a/></td></tr>' +\n                       '<tr class=\"filter frm btnBox\"><td colspan=\"3\">' +\n                       '<button type=\"submit\">' + i18n.ftr + '</button>' + \n                       '<button type=\"button\">' + i18n.rst + '</button>' + \n                       '<button type=\"button\">' + info.cl + '</button></td></tr>';\n            var items = $('#tmenu').append(data);\n            var fobj = {o: this.order}\n            \n            this.renderOrder(fobj);\n            \n            var inputs = items.find('input');\n            var btns = items.find('button');\n            var hrefs = items.find('a');\n            \n            $(inputs[0]).val(this.filter1);\n            $(inputs[1]).val(this.filter2);\n            $(inputs[2]).val(this.filter3);\n            \n            $(btns[0]).click(function(e){e.preventDefault();_this.setFilter.call(_this, $(inputs[0]).val(), $(inputs[1]).val(), $(inputs[2]).val(), fobj.o + '')});\n            $(btns[1]).click(function(e){e.preventDefault();_this.resetFilter.call(_this);});\n            $(btns[2]).click(function(e){e.preventDefault();_this.renderMenu.call(_this);});\n        },\n        renderMenu : function() {\n            var _this = this;\n            var i18n = this.i18n.menu;\n            $('#tmenu').text('');\n            var data = '<tr ><td colspan=\"3\"><a href=\"#\">' + i18n.add + '</a> | <a href=\"#\">' + i18n.fts + '</a> | <a href=\"#\">' + i18n.ipp + ' (' + this.ipp + ')</a></td></tr>';\n            var items = $('#tmenu').append(data);\n            var btns = items.find('a');\n            $(btns[0]).click(function(e){e.preventDefault();_this.showAdd.call(_this);});\n            $(btns[1]).click(function(e){e.preventDefault();_this.renderFilter.call(_this);});\n            $(btns[2]).click(function(e){e.preventDefault();_this.renderIPP.call(_this);});\n        }, \n        renderTable : function(data) {\n            $('#result').text('');\n            for(var i = 0; i < data.length; i++) {\n                if(data[i].e == undefined) {\n                    this.renderRow(data[i])\n                }\n            }\n            this.renderPages();\n        },\n        renderRem : function(id) {\n            var _this = this;\n            var i18n = this.i18n.info;\n            var item = $('#_item_' + id);\n            var idata = this.fromElem(item)\n            var data = '<tr><td colspan=\"3\"><div style=\"margin-bottom:10px;\">' +\n                        i18n.rrem + \n                       '</div><div class=\"frm btnBox\"><button id=\"aabrt\" type=\"button\" style=\"margin-right:10px;\">' + i18n.cl + '</button><button id=\"arem\" type=\"button\">' + i18n.rm + '</button></div></td></tr>';\n            this._selItem(id, data, true);\n            $('#aabrt').click(function(){_this.selItem.call(_this, idata.id, true);});\n            $('#arem').click(function(){_this.doRemove.call(_this, idata);});\n        },\n        renderEdit : function(id) {\n            var _this = this;\n            var i18n = this.i18n.info;\n            \n            var item = $('#_item_' + id);\n            var idata = this.fromElem(item);\n            var data = '<tr class=\"sel0 titem\"><td>' + idata.nm + '</td><td><textarea id=\"edtxt\" class=\"edtxt\">' + idata.d + '</textarea></td><td>' + idata.n + '</td></tr><tr><tr><td colspan=\"3\"><div style=\"margin-bottom:10px;\">' +\n                        i18n.dsav + \n                       '</div><div class=\"frm btnBox\"><button id=\"aabrt\" type=\"button\" style=\"margin-right:10px;\">' + i18n.cl + '</button><button id=\"sav\" type=\"button\">' + i18n.sav + '</button></div></td></tr>';\n            var r = this._selItem(id, data, true, item);\n            r.a.addClass('hide');\n            r.a.removeClass('sel0');\n            $(r.b[0]).removeClass('sel1');\n            r.b._remove = function() {\n                r.a.removeClass('hide');\n            };\n            \n            $('#aabrt').click(function(){_this.doSelItem.call(_this, idata, true);});\n            $('#sav').click(function(){idata.d = $('#edtxt').val(); _this.doSave.call(_this, idata, r.a);});\n        \n        },\n        setPage: function(p, passiv) {\n            var np = parseInt(p);\n            var o = this.getOpt({p:np-1});\n            this.doList(o);\n            if(!passiv) {\n                var params = parseSearch();\n                delete params.p;\n                if(np != 1) params.p = np;\n                putSearchMenu(params);\n            }\n        },\n        setIPP : function(ipp, passiv) {\n            var _this = this;\n            var n = parseInt(ipp);\n            if(!passiv) {\n                var params = parseSearch();\n                delete params.p;\n                delete params.i;\n                if(n != 10) params.i = n;\n                putSearchMenu(params);\n            }\n            this.doList(this.getOpt({i:n,p:0}), function() {\n                _this.renderMenu();\n            });\n        },\n        setFilter : function(f1, f2, f3, o, passiv) {\n            var _this = this;\n            var on = parseInt(o) || 0;\n            if(!passiv) {\n                var params = parseSearch();\n                delete params.f1;\n                delete params.f2;\n                delete params.f3;\n                delete params.o;\n                delete params.p;\n                if(f1) params.f1 = f1;\n                if(f2) params.f2 = f2;\n                if(f3) params.f3 = f3;\n                if(on != 0) params.o = on;\n                putSearchMenu(params);\n            }\n            this.doList(this.getOpt({f1:f1,f2:f2,f3:f3,o:on,p:0}), function() {\n            });\n        },\n        resetFilter : function(passiv) {\n            var _this = this;\n            if(!passiv) {\n                var params = parseSearch();\n                delete params.f1;\n                delete params.f2;\n                delete params.f3;\n                delete params.o;\n                putSearchMenu(params);\n            }\n            this.doList(this.getOpt({f1:\"\", f2:\"\", f3:\"\", o:0, p:0}), function() {\n                _this.renderFilter();\n            });\n        },\n        gotoAddDomain : function(id) {\n            var item = this.fromId(id);\n            spf.navigate('/dash_domains?did=' + id + '&n=' + item.nm);\n        },\n        getOpt : function(o) {\n            var r = {};\n            if(this.page != 1)\n                r.p = this.page - 1;\n            r.i = this.ipp || 10;\n            r.f1 = this.filter1 || \"\";\n            r.f2 = this.filter2 || \"\";\n            r.f3 = this.filter3 || \"\";\n            r.o = this.order || 0;\n            r = $.extend(r, o);\n            if(r.i  == 10) delete r.i;\n            if(r.p  == 0)  delete r.p;\n            if(r.f1 == \"\") delete r.f1;\n            if(r.f2 == \"\") delete r.f2;\n            if(r.f3 == \"\") delete r.f3;\n            if(r.o  == 0) delete r.o;\n            if(r.i === undefined && r.p === undefined && r.f1 === undefined && r.f2 === undefined && r.f3 === undefined && r.o === undefined)\n                return null;\n            return r;\n        },\n        copyName : function(id) {\n            var item = $('#_item_' + id)[0].firstChild;\n            var temp = $(\"<input>\");\n            $(\"body\").append(temp);\n            temp.val($(item).text()).select();\n            document.execCommand(\"copy\");\n            temp.remove();\n        },\n        doSelItem : function(item, keep, passiv) {\n            var id = item.id;\n            var name = item.nm;\n            var i18n = this.i18n.info;\n            var data = '<tr><td colspan=\"3\">' +\n                      '<a target=\"_blank\" href=\"' + userBaseRaw('http://', '', name) + '\">' + i18n.lnk + '</a>' +\n                      '<a href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'copyName\\',[\\'' + id + '\\']);\">' + i18n.cpy + '</a>' +\n                      '<a href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'gotoAddDomain\\',[\\'' + id + '\\']);\">' + i18n.ad + '</a>' +\n                      '<a href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'renderEdit\\',[\\'' + id + '\\']);\">' + i18n.ed + '</a>' +\n                      '<a href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'renderRem\\',[\\'' + id + '\\']);\">' + i18n.rm + '</a>' +\n                      '</td></tr>';\n            this._selItem(id, data, keep);\n            if(!passiv) {\n                var params = parseSearch();\n                delete params.s\n                if(this.selected) \n                    params.s = id;\n                putSearchMenu(params);\n            }\n        },\n        selItem : function(id, keep, passiv) {\n            var e = this.fromId(id);\n            if(e)\n                this.doSelItem(e, keep, passiv);\n        },\n        _selItem : function(id, data, keep, _item) { \n            var item = _item || $('#_item_' + id);\n            var selected = this.selected;\n            if(selected) {\n                selected.a.removeClass('sel0');\n                if(selected.b._remove)\n                    selected.b._remove();\n                selected.b.remove();\n                this.selected = null;\n                if(selected.a[0].id === item[0].id && !keep) \n                    return;\n            } \n            \n            var after = $(data).insertAfter(item);\n            item.addClass('sel0');\n            after.addClass('sel1');\n        \t\n            this.selected = {a:item,b:after};\n            return this.selected;\n        },\n        fromId : function(id) { \n            var e = $('#_item_' + id);\n            if(e.length != 0)\n                return this.fromElem(e);\n            return null;\n        },\n        fromElem : function(e) {\n            var r = {};\n            var c = e.children();\n            r.id = parseInt(e.attr('id').substr(6));\n            r.nm = $(c[0]).text();\n            r.d = $(c[1]).text();\n            r.n = $(c[2]).text();\n            r.nid = parseInt($(c[2]).attr('nid'));\n            return r;\n        },\n        buildRow : function(item) {\n            var data = '<tr id=\"_item_' + item.id + '\" class=\"titem\" onclick=\"javascript:mCall(' + '\\'' + \n            this._module + '\\'' + ',\\'selItem\\',[\\'' + item.id + '\\']);\"><td>' + \n            item.nm + '</td><td>' + item.d + '</td><td nid=\"' + item.nid + '\">' + item.n + '</td></tr>';\n            return data;\n        },\n        renderRow : function(item, front) {\n            if(front)\n                $('#result').prepend(this.buildRow(item));\n            else\n                $('#result').append(this.buildRow(item));\n        },\n        replaceNode : function(item, elem) {\n            elem.replaceWith(this.buildRow(item));\n            this.selItem(item.id, item.n, true);\n        },\n        renderTableHdr : function() {\n            var i18n = this.i18n.info;\n            $('#thdr').html('<tr class=\"thdr\"><th>' + i18n.n +\n                            '</th><th>' +  i18n.dsc +\n                            '</th><th>' +  i18n.nn + '</th></tr>');\n        },\n        doList : function(o, after, p) {\n            var i18n = this.i18n.info;\n            var _this = this;\n            var params = p || parseSearch();\n            this.renderTableHdr();\n            this.page = 1;\n            this.ipp = 10;\n            this.filter1 = undefined;\n            this.filter2 = undefined;\n            this.filter3 = undefined;\n            this.order = undefined;\n            this.selected = undefined;\n            var d = {cmd:10};\n            if(o)\n            {\n                if(o.i)  this.ipp = o.i;\n                if(o.p)  this.page = o.p + 1;\n                if(o.f1) this.filter1 = o.f1;\n                if(o.f2) this.filter2 = o.f2;\n                if(o.f3) this.filter3 = o.f3;\n                if(o.o)  this.order = o.o;\n                if(o.p)\n                    o.p = o.p * this.ipp;\n                d.data = JSON.stringify(o);\n            }\n            postCreds(userBase('/admin/'), {data:JSON.stringify(d)}, function(data) {\n                if(data.r == 0) {\n                    _this.max = typeof data.m === 'number' ? data.m : 0;\n                    _this.renderTable(data.d);\n                    if(params.s) {\n                        _this.selItem(params.s, false, true);\n                    }\n                } else {\n                    modalError(i18n.lfail);\n                }\n                \n                if(after)\n                    after();\n            });\n        },\n        doSave : function(item, elem) {\n            var _this = this;\n            var i18n = this.i18n.info;\n            postCreds(userBase('/admin/'), {data:'{\"cmd\":18, \"data\":' + JSON.stringify(JSON.stringify({id:item.id,d:item.d})) + '}'}, function(data) {\n                if(data.r == 0) {\n                    _this.replaceNode(item, elem);\n                    _this.selItem(item.id, true, true);\n                } else {\n                    modalError(i18n.sfail);\n                }\n            });\n            \n        },\n        doUnreg : function(id, view) {\n            var _this = this;\n            var i18n = this.i18n.info;\n            /* unregister with user dash */\n            postCreds(userBase('/admin/'), {data:'{\"cmd\":12, \"data\":' + JSON.stringify(JSON.stringify(id)) + '}'}, function(data) {\n                if(data.r == 0) {\n                    if(view) {\n                        _this.selItem(id, false, false);\n                        $('#_item_' + id).remove();\n                    }\n                } else {\n                    modalError(i18n.rfail);\n                }\n            });\n        },\n        doRemove : function(item) {\n            var _this = this;\n            var i18n = this.i18n.info;\n            var id = item.id;\n            var nid = item.nid;\n            var node = item.n;\n            var name = item.nm;\n            /* cross remove from node with name */ \n            postCredsCross({id:nid}, userBase('/server/', node), {data:'{\"cmd\":3,\"data\":' + JSON.stringify(JSON.stringify({d:name,n:1})) + '}'}, function(data) {\n                if(data.r == 0 || data.r == 270532633) { /* ok or not exist */\n                    _this.doUnreg(id, true);\n                } else {\n                    modalError(i18n.rfail);\n                }\n            });\n        },\n        run : function() {\n            var _this = this;\n            var params = parseSearch();\n            \n              var o = {};\n            if(params.p)  o.p = parseInt(params.p) - 1;\n            if(params.i)  o.i = parseInt(params.i);\n            if(params.f1) o.f1 = params.f1;\n            if(params.f2) o.f2 = params.f2;\n            if(params.f3) o.f3 = params.f3;\n            if(params.o)  o.o = parseInt(params.o);\n            \n            this.doList(o, function() {\n                if(params.n) {\n                    _this.showAdd(function() {\n                        $(\"#tn\").val(params.nid);\n                        $(\"#nn\").val(params.n);\n                    });\n                }\n                if(_this.filter1 || _this.filter2 || _this.filter3 || _this.order != undefined)\n                    _this.renderFilter();\n                else\n                    _this.renderMenu();\n            }, params);\n        }\n    }\n}();</script>","content":"<div class=\"linner\"><div id=\"add_form\"></div><form onsubmit=\"return false;\"><table class=\"tlist thead\" style=\"margin-top:20px;\"><thead class=\"full\"><tr><th><h1>{{info.head}}</h1></th><th></th><th></th></tr></thead><tbody id=\"tmenu\"></tbody></table></form><div class=\"pmenu\"></div><form onsubmit=\"return false;\"><table class=\"tlist\"><thead id=\"thdr\"></thead><tbody id=\"result\"></tbody></table></form><div class=\"pmenu\"></div><div style=\"clear:both;\"></div></div>"}}