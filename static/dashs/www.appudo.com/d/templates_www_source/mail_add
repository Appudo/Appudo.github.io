{"foot":"<style name=\"stl_mail_add\">\n    .box1 {\n        padding-bottom:0;\n    }\n</style>","body": {"minit":"<script>minit('mail_add',['add_form'], {srefs:['add_form'],sid:'stl_mail_add'});<\/script>","misc":"<script>moduleCtx['mail_add']=function(){\n    return {\n        nosel:true,\n        rstFrm : function(frm) {\n            this.rstFrmErr(frm);\n            frm[0].reset();\n        },\n        rstFrmErr : function(frm) {\n            /*  TODO remove error messages */\n        },\n        validateFrm : function(frm) {\n            var _this = this;\n            var data = frm.serializeJSON();\n            _this.doSubmit.call(_this, data);\n        },\t\n        errSubmit : function(data) {\n\t        /*  todo submit ERROR   */\n        },\t\n        finSubmit : function() {\n\t\t    this.rstFrm($('#MailAddFrm'));\n        },\n        doSubmit : function(data) {\n            var _this = this;\n            $.post( '/server/', {data:JSON.stringify({cmd:9,data:JSON.stringify(data)})}, function(data) {\n                if(data.r == 0) {\n                    _this.finSubmit()\n                } else {\n                    /*  TODO error */\n                }\n            });\n        },\n        hide : function() {\n            this.onUnload(true);\n        },\n        dashClose : function(e) {\n            var _this = e.data.ctx;\n            if ($(e.target).closest(\"#dashSearch\").length === 0 && e.target != $('#dashBtn')[0]) {\n                $(document).off('click', _this.dmnClose);\n                _this.showSearch('dash', true);\n            }\n        },\n        usrClose : function(e) {\n            var _this = e.data.ctx;\n            if ($(e.target).closest(\"#usrSearch\").length === 0 && e.target != $('#usrBtn')[0]) {\n                $(document).off('click', _this.sslClose);\n                _this.showSearch('usr', true);\n            }\n        },\n        showSearch : function(ty, off) {\n            var s = $('#' + ty + 'Search');\n            \n            if(!s.hasClass('block')) {\n                s.toggleClass('block');\n                $(document).on('click', {ctx:this}, this[ty + 'Close']);\n                var b = $('#' + ty + 'Btn');\n                var bo = b.offset();\n                s.css('left', bo.left);\n                s.css('top', bo.top + b.outerHeight());\n                if(s.offset().left + s.outerWidth() > $(window).width()) {\n                    s.css('left', bo.left + b.outerWidth() - s.width());\n                }\n                $('#' + ty + 'Input').focus();\n            }\n            \n            if(off)\n                s.toggleClass('block');\n        },\n        filterSearch : function(ty) {\n            console.log('filter')\n            var input, filter, ul, li, a, i;\n            input = $('#' + ty + 'Input');\n            filter = input.val().toUpperCase();\n            div = $('#' + ty + 'Search');\n            a = div[0].getElementsByTagName(\"a\");\n            for (i = 0; i < a.length; i++) {\n                if (a[i].innerHTML.toUpperCase().indexOf(filter) > -1) {\n                    a[i].style.display = \"\";\n                } else {\n                    a[i].style.display = \"none\";\n                }\n            }\n        },\n        run : function() {\n            var _this = this; \n            var frm = $('#MailAddFrm');\n            \n            $('#abrt').click(function(){_this.hide.call(_this);}); \n            $('#dashBtn').click(function(e){_this.showSearch.call(_this, 'dash');});\n            $('#usrBtn').click(function(e){_this.showSearch.call(_this, 'usr');});\n            \n            handleError(frm, function() {\n                _this.validateFrm.call(_this, frm);\n            }, '');   \n            \n            frm.submit(function(e) {\n                e.preventDefault();\n            });\n        }\n    }\n}();<\/script>","add_form":"<div id=\"dashSearch\" class=\"searchContent\"><form onsubmit=\"return false;\" class=\"frm\"><div><input type=\"text\" placeholder=\"{{frm.dsrh}}\" id=\"dashInput\" class=\"search\"><button type=\"submit\" id=\"dashSBtn\">{{frm.srh}}<\/button><\/div><\/form><a href=\"#about\">About<\/a><a href=\"#base\">Base<\/a><a href=\"#blog\">Blog<\/a><a href=\"#contact\">Contact<\/a><a href=\"#custom\">Custom<\/a><a href=\"#support\">Support<\/a><a href=\"#tools\">Tools<\/a><\/div><div id=\"usrSearch\" class=\"searchContent\"><form onsubmit=\"return false;\" class=\"frm\"><div><input type=\"text\" placeholder=\"{{frm.usrh}}\" id=\"usrInput\" class=\"search\"><button type=\"submit\" id=\"usrSBtn\">{{frm.srh}}<\/button><\/div><\/form><a href=\"#about\">About<\/a><a href=\"#base\">Base<\/a><a href=\"#blog\">Blog<\/a><a href=\"#contact\">Contact<\/a><a href=\"#custom\">Custom<\/a><a href=\"#support\">Support<\/a><a href=\"#tools\">Tools<\/a><\/div><div class=\"htop\"><h1>{{info.add}}<\/h1><\/div><div class=\"frmBox\"><form id=\"MailAddFrm\" class=\"frm min\"><div class=\"box1\"><div class=\"searchFrame\" style=\"float:right;\"><button id=\"dashBtn\" class=\"searchBtn\" type=\"button\">▼<\/button><\/div><label style=\"clear:none;\" for=\"td\">{{frm.td}}*:<\/label><input type=\"text\" id=\"td\" name=\"td\" style=\"width:16em;\" pattern=\"[+-]?[0-9]{1,10}\" required=\"\"><label for=\"un\">{{frm.un}}*:<\/label><div class=\"searchFrame\" style=\"float:right;\"><button id=\"usrBtn\" class=\"searchBtn\" type=\"button\">▼<\/button><\/div><input type=\"text\" id=\"un\" name=\"un\" style=\"width:16em;\" required=\"\"><label for=\"ma\">{{frm.ma}}*:<\/label><input type=\"email\" id=\"ma\" name=\"ma\" required=\"\"><label for=\"ty\">{{frm.ty}}:<\/label><select id=\"ty\" name=\"ty\"><option value=\"pln\">plain<\/option><\/select><div style=\"clear:both;\"><\/div><input type=\"text\" id=\"o1\" name=\"o1\" style=\"display:none;\"><div style=\"clear:both;\"><\/div><input type=\"text\" id=\"o2\" name=\"o2\" style=\"display:none;\"><div style=\"clear:both;\"><\/div><input type=\"text\" id=\"o3\" name=\"o3\" style=\"display:none;\"><div style=\"clear:both;\"><\/div><div><input type=\"submit\" style=\"float:right;margin-top:10px;margin-right:10px\" value=\"{{frm.sub}}\"><input type=\"button\" id=\"abrt\" style=\"float:right;margin-top:10px;margin-right:10px\" value=\"{{frm.cls}}\"><\/div><\/div><\/form><div style=\"clear:both;\"><\/div><\/div>"}}