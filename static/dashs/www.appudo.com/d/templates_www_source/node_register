{"foot":"<style name=\"stl_node_register\">\n    .box1 { \n        margin-top:32px;\n    }\n</style>","body": {"minit":"<script>minit('node_register',['add_form'], {srefs:['add_form'],sid:'stl_node_register'});<\/script>","misc":"<script>moduleCtx['node_register']=function(){\n    return {\n        nosel:true,\n        rstFrm : function(frm) {\n            frm[0].reset();\n        },\n        validateFrm : function(frm) {\n            var _this = this;\n            var data = frm[0]._sdata || frm.serializeJSON();\n            _this.doSubmit.call(_this, data);\n        },\n        finSubmit : function() {\n\t\t    this.rstFrm($('#regNFrm'));\n        },\n        doSubmit : function(fdt) {\n            var _this = this;\n            var info = this.i18n.info;\n            var ty = 0;\n            \n            if(!isMaster())\n            {\n                fdt.ex = 1;\n            }\n            \n            ty |= fdt.ex ? 1 << 0 : 0;  \n            ty |= fdt.ma ? 1 << 1 : 0;  \n            ty |= fdt.dn ? 1 << 2 : 0;  \n            ty |= fdt.us ? 1 << 3 : 0;  \n            ty |= fdt.pk ? 1 << 4 : 0;  \n            ty |= fdt.st ? 1 << 5 : 0;  \n            ty |= fdt.sc ? 1 << 6 : 0;  \n            fdt.ty = ty;\n            \n            var d = {cmd:8, data:JSON.stringify({ds:fdt.ds, ty:ty})}\n            var ds = fdt.ds;\n            \n            delete fdt.ds;\n            delete fdt.ma;\n            delete fdt.dn;\n            delete fdt.us;\n            delete fdt.pk;\n            delete fdt.st;\n            delete fdt.sc;\n            delete fdt.ex;\n            \n            postCreds(userBase('/admin/'), {data:JSON.stringify(d), fwd:JSON.stringify(fdt)}, function(data) {\n                if(data.r != 0) {\n                    modalError(info.afail)\n                } else {\n                    _this.finSubmit();\n                    if(_this.onAdd) {\n                        fdt.ds = ds;\n                        _this.onAdd(fdt, data);\n                    }\n                }\n            });\n        },\n        hide : function() {\n            this.onUnload(true);\n        },\n        run : function() {\n            var _this = this; \n            var frm = $('#regNFrm');\n            \n            $('#abrt').click(function(){_this.hide.call(_this);});\n               \n            handleError(frm, function() {\n                _this.validateFrm.call(_this, frm);\n            }, '');   \n            \n            frm.submit(function(e) {\n                e.preventDefault();\n            });\n        }\n    }\n}();<\/script>","add_form":"<div><div class=\"htop\"><h1>{{info.add}}<\/h1><\/div><div class=\"frmBox\"><form id=\"regNFrm\" class=\"frm min\"><div class=\"box1\" style=\"float:left;\"><label for=\"ipv4\">{{frm.ipv4}}*:<\/label><input type=\"text\" id=\"ipv4\" name=\"ipv4\" pattern=\"((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}$\" required=\"\"><label for=\"ipv6\">{{frm.ipv6}}:<\/label><input type=\"text\" id=\"ipv6\" name=\"ipv6\" pattern=\"((^|:)([0-9a-fA-F]{0,4})){1,8}$\"><label class=\"master\">Node Options:<\/label><div style=\"clear:both;\"><\/div><div class=\"noclear master\"><label for=\"ma\">{{frm.ma}}<\/label><input type=\"checkbox\" id=\"ma\" name=\"ma\" value=\"ma\"><label for=\"dn\">{{frm.dn}}<\/label><input type=\"checkbox\" id=\"dn\" name=\"dn\" value=\"dn\"><label for=\"us\">{{frm.us}}<\/label><input type=\"checkbox\" id=\"us\" name=\"us\" value=\"us\"><label for=\"pk\">{{frm.pk}}<\/label><input type=\"checkbox\" id=\"pk\" name=\"pk\" value=\"pk\"><div style=\"clear:both;\"><\/div><label for=\"st\">{{frm.st}}<\/label><input type=\"checkbox\" id=\"st\" name=\"st\" value=\"st\"><label for=\"sn\">{{frm.sc}}<\/label><input type=\"checkbox\" id=\"sc\" name=\"sc\" value=\"sc\"><label for=\"ex\">{{frm.ex}}<\/label><input type=\"checkbox\" id=\"ex\" name=\"ex\" value=\"ex\"><\/div><\/div><div class=\"box2\" style=\"float:left;\"><label for=\"ps\">{{frm.ps}}*:<\/label><div style=\"clear:both;\"><\/div><div style=\"margin:0 10px 0 10px;\"><textarea id=\"ps\" name=\"ps\" required=\"\"><\/textarea><\/div><label for=\"ds\">{{frm.ds}}:<\/label><div style=\"clear:both;\"><\/div><div style=\"margin:0 10px 0 10px;\"><textarea id=\"ds\" name=\"ds\"><\/textarea><\/div><div><input type=\"submit\" style=\"float:right;margin-top:10px;margin-right:10px\" value=\"{{frm.sub}}\"><input type=\"button\" id=\"abrt\" style=\"float:right;margin-top:10px;margin-right:10px\" value=\"{{frm.cls}}\"><\/div><div style=\"clear:both;\"><\/div><\/div><\/form><\/div><\/div>"}}