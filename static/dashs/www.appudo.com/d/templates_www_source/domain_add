{"foot":"<style name=\"stl_domain_add\">\n    .box1 {\n        padding-bottom:0;\n    }\n</style>","body": {"minit":"<script>minit('domain_add',['add_form'], {srefs:['add_form'],sid:'stl_domain_add'});<\/script>","misc":"<script>moduleCtx['domain_add']=function(){\n    return {\n        nosel:true,\n        rstFrm : function(frm) {\n            frm[0].reset();\n        },\n        validateFrm : function(frm) {\n            var _this = this;\n            var data = frm.serializeJSON();\n            _this.doSubmit.call(_this, data);\n        },\t\n        finSubmit : function() {\n\t\t    this.rstFrm($('#DmnAddFrm'));\n        },\n        doRegister : function(did, an, dn, after) {\n            getNodeByDashID(did, function(node) {\n                 postCredsCross({id:node.id}, userBase('/server/', node.name), {data:'{\"cmd\":9,\"data\":' + JSON.stringify(JSON.stringify({an:an,dn:dn,sn:''})) + '}'}, function(data) {\n                    if(data.r == 0 || data.r == 270532633) { /* ok or not exist */\n                        after();\n                    } else {\n                        modalError(info.afail);\n                    }\n                 });\n            });\n        },\n        doSubmit : function(fdt) {\n            var _this = this;\n            var info = this.i18n.info;\n            fdt.td = parseInt(fdt.td);\n            postCreds(userBase('/admin/'), {data:JSON.stringify({cmd:20,data:JSON.stringify(fdt)})}, function(data) {\n                if(data.r != 0) {\n                    modalError(info.afail);\n                } else {\n                    _this.doRegister(fdt.td, data.dn, fdt.dn, function() {\n                        _this.finSubmit();\n                        if(_this.onAdd) {\n                            _this.onAdd(fdt, data);\n                        }\n                    });\n                }\n            });\n            \n        },\n        hide : function() {\n            this.onUnload(true);\n        },\n        run : function() {\n            var _this = this; \n            var frm = $('#DmnAddFrm');\n            \n            $('#abrt').click(function(){_this.hide.call(_this);});\n            \n            handleError(frm, function() {\n                _this.validateFrm.call(_this, frm);\n            }, '');   \n            \n            frm.submit(function(e) {\n                e.preventDefault();\n            });\n        }\n    }\n}();<\/script>","add_form":"<div id=\"dashSearch\" class=\"searchContent\"><form onsubmit=\"return false;\" class=\"frm\"><div><input type=\"text\" placeholder=\"{{frm.dsrh}}\" id=\"dashInput\" class=\"search\"><button type=\"submit\" id=\"dashSBtn\">{{frm.srh}}<\/button><\/div><\/form><a href=\"#about\">About<\/a><a href=\"#base\">Base<\/a><a href=\"#blog\">Blog<\/a><a href=\"#contact\">Contact<\/a><a href=\"#custom\">Custom<\/a><a href=\"#support\">Support<\/a><a href=\"#tools\">Tools<\/a><\/div><div class=\"htop\"><h1>{{dmn.head}}<\/h1><\/div><div class=\"frmBox\"><form id=\"DmnAddFrm\" class=\"frm min\"><div class=\"box1\"><div class=\"searchFrame\" style=\"float:right;\"><button id=\"dashBtn\" class=\"searchBtn\" type=\"button\">â–¼<\/button><\/div><label style=\"clear:none;\" for=\"td\">{{frm.td}}*:<\/label><input type=\"text\" id=\"td\" name=\"td\" style=\"width:16em;\" pattern=\"[+-]?[0-9]{1,10}\" required=\"\"><label for=\"dn\">{{frm.dn}}*:<\/label><input type=\"text\" id=\"dn\" name=\"dn\" pattern=\"^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,6}$\" required=\"\"><div style=\"clear:both;\"><\/div><label for=\"ds\">{{frm.ds}}:<\/label><div style=\"clear:both;\"><\/div><div style=\"margin:0 10px 0 10px;\"><textarea id=\"ds\" name=\"ds\"><\/textarea><\/div><div><input type=\"submit\" style=\"float:right;margin-top:10px;margin-right:10px\" value=\"{{frm.sub}}\"><input type=\"button\" id=\"abrt\" style=\"float:right;margin-top:10px;margin-right:10px\" value=\"{{frm.cls}}\"><\/div><div style=\"clear:both;\"><\/div><\/div><\/form><\/div>"}}