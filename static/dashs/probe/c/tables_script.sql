"CreateFTable"(arg_account bigint, arg_tmp_schema TEXT)\n                      RETURNS text AS\n                    $BODY$DECLARE\n                            res_new_schemaQ TEXT;\n                            res_new_table TEXT;\n                            res_new_tableQ TEXT;\n                            res_defer_table TEXT = '';\n                            res_other_table TEXT;\n                            var_user TEXT := NULL;\n                    BEGIN\n                    res_new_schemaQ = quote_ident(arg_tmp_schema);\n                    SELECT "GetUser"() INTO var_user;\nres_defer_table = res_defer_table || '"CreateTableFConst"(arg_account bigint)\n                                  RETURNS void AS\n                                $BODY2$DECLARE\n                                        res_new_schemaQ TEXT;\n                                        res_new_table TEXT;\n                                        res_new_tableQ TEXT;\n                                        res_other_tableQ TEXT;\n                                        var_user TEXT := NULL;\n                                BEGIN\n                                res_new_schemaQ = quote_ident(TEXT(arg_account));' || CHR(10);\nSELECT new FROM tables_map WHERE old = 1 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nid integer NOT NULL,\nargs text NOT NULL,\ndescription text,\nboard text);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'compiler_options_unique_id') || ' UNIQUE (id);';\nSELECT new FROM tables_map WHERE old = 2 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\ntriple text,\ncompiler_prefix text,\ndescription text,\noptions integer[],\nactive boolean,\nbpf_options text);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';SELECT new FROM tables_map WHERE old = 3 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\ndata jsonb);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';SELECT new FROM tables_map WHERE old = 4 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '\nSTART WITH 1\nINCREMENT BY  1\nMINVALUE 1\nMAXVALUE 9223372036854775807\nCACHE 1;';\n\nSELECT new FROM tables_map WHERE old = 7 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probe_runs_group_fkey FOREIGN KEY (groups_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE SET NULL ;'';';\n                        \nSELECT new FROM tables_map WHERE old = 10 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probe_runs_user_fkey FOREIGN KEY (users_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE NO ACTION ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nid integer DEFAULT nextval(''' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '''::regclass) NOT NULL,\nname text NOT NULL,\noptions jsonb,\ngroups_id integer,\nusers_id integer NOT NULL,\ndescription text);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNED BY ' || res_new_tableQ || '.id;';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'probe_runs_unique_name') || ' UNIQUE (name);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (id);';\nSELECT new FROM tables_map WHERE old = 5 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '\nSTART WITH 1\nINCREMENT BY  1\nMINVALUE 1\nMAXVALUE 9223372036854775807\nCACHE 1;';\n\nSELECT new FROM tables_map WHERE old = 4 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probe_run_instance_fkey FOREIGN KEY (runs_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE CASCADE ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nruns_id integer NOT NULL,\nmodule_instances_id integer NOT NULL,\noptions jsonb,\nvisible boolean DEFAULT false NOT NULL,\nname text NOT NULL,\nid integer DEFAULT nextval(''' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '''::regclass) NOT NULL);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNED BY ' || res_new_tableQ || '.id;';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (id);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'run_instances_unique') || ' UNIQUE (runs_id, name);';\nSELECT new FROM tables_map WHERE old = 6 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '\nSTART WITH 1\nINCREMENT BY  1\nMINVALUE 1\nMAXVALUE 9223372036854775807\nCACHE 1;';\n\nSELECT new FROM tables_map WHERE old = 11 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT module_instance_fkey FOREIGN KEY (modules_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE CASCADE ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nid integer DEFAULT nextval(''' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '''::regclass) NOT NULL,\nmodules_id integer,\nname text,\noptions jsonb);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNED BY ' || res_new_tableQ || '.id;';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (id);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'probe_module_instances_unique') || ' UNIQUE (modules_id, name);';\nSELECT new FROM tables_map WHERE old = 7 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '\nSTART WITH 1\nINCREMENT BY  1\nMINVALUE 1\nMAXVALUE 9223372036854775807\nCACHE 1;';\n\nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nid integer DEFAULT nextval(''' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '''::regclass) NOT NULL,\nname text NOT NULL,\ndescription text);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNED BY ' || res_new_tableQ || '.id;';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'probe_groups_unique_name') || ' UNIQUE (name);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (id);';\nSELECT new FROM tables_map WHERE old = 8 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nSELECT new FROM tables_map WHERE old = 7 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT users_groups_gid_fkey FOREIGN KEY (groups_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE CASCADE ;'';';\n                        \nSELECT new FROM tables_map WHERE old = 10 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT users_groups_uid_fkey FOREIGN KEY (users_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE CASCADE ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nusers_id integer NOT NULL,\ngroups_id integer NOT NULL,\nperm integer DEFAULT 0 NOT NULL);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (users_id, groups_id);';\nSELECT new FROM tables_map WHERE old = 9 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nSELECT new FROM tables_map WHERE old = 10 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT users_register_fkey FOREIGN KEY (users_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE CASCADE ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nusers_id integer NOT NULL,\nticket text NOT NULL,\ntime bigint,\ntype integer);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';SELECT new FROM tables_map WHERE old = 10 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '\nSTART WITH 1\nINCREMENT BY  1\nMINVALUE 1\nMAXVALUE 9223372036854775807\nCACHE 1;';\n\nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nid integer DEFAULT nextval(''' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '''::regclass) NOT NULL,\nlogin text,\nlogin_cookie text,\nkey text NOT NULL,\nlast_login bigint,\nsalt text NOT NULL,\nattempts integer,\nkeep boolean,\nmail text NOT NULL,\nperm integer DEFAULT 0 NOT NULL,\nlocked boolean DEFAULT false NOT NULL,\nsettings jsonb);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNED BY ' || res_new_tableQ || '.id;';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'probe_users_unique_login') || ' UNIQUE (login);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'users_login_unique') || ' UNIQUE (login);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (id);';\nSELECT new FROM tables_map WHERE old = 11 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '\nSTART WITH 1\nINCREMENT BY  1\nMINVALUE 1\nMAXVALUE 9223372036854775807\nCACHE 1;';\n\nSELECT new FROM tables_map WHERE old = 7 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probe_modules_group_fkey FOREIGN KEY (groups_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE SET NULL ;'';';\n                        \nSELECT new FROM tables_map WHERE old = 10 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probe_modules_user_fkey FOREIGN KEY (users_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE NO ACTION ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nid integer DEFAULT nextval(''' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '''::regclass) NOT NULL,\nname text NOT NULL,\noptions jsonb,\ngroups_id integer,\nusers_id integer NOT NULL,\ndescription text,\nlocked boolean);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNED BY ' || res_new_tableQ || '.id;';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'modules_name_unqiue') || ' UNIQUE (name);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (id);';\nSELECT new FROM tables_map WHERE old = 12 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '\nSTART WITH 1\nINCREMENT BY  1\nMINVALUE 1\nMAXVALUE 9223372036854775807\nCACHE 1;';\n\nSELECT new FROM tables_map WHERE old = 13 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probes_settings_fkey FOREIGN KEY (probes_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE CASCADE ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nid integer DEFAULT nextval(''' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '''::regclass) NOT NULL,\nidentifier text,\nsettings jsonb,\nprobes_id integer NOT NULL);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNED BY ' || res_new_tableQ || '.id;';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (id);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'probes_settings_unique') || ' UNIQUE (identifier, probes_id);';\nSELECT new FROM tables_map WHERE old = 13 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '\nSTART WITH 1\nINCREMENT BY  1\nMINVALUE 1\nMAXVALUE 9223372036854775807\nCACHE 1;';\n\nSELECT new FROM tables_map WHERE old = 7 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probe_probes_group_fkey FOREIGN KEY (groups_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE SET NULL ;'';';\n                        \nSELECT new FROM tables_map WHERE old = 10 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probe_probes_user_fkey FOREIGN KEY (users_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE NO ACTION ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nid integer DEFAULT nextval(''' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '''::regclass) NOT NULL,\nlogin text,\nkey text,\ngroups_id integer,\nusers_id integer NOT NULL,\ndescription text);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNED BY ' || res_new_tableQ || '.id;';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'probe_probes_unique_login') || ' UNIQUE (login);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (id);';\nSELECT new FROM tables_map WHERE old = 14 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nSELECT new FROM tables_map WHERE old = 12 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probes_active_setting_fkey FOREIGN KEY (probes_settings_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE CASCADE ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nsocket integer NOT NULL,\nidentifier text NOT NULL,\nprobes_settings_id integer,\nprobes_id integer NOT NULL,\ntime bigint,\nremote_addr text);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (identifier, probes_id);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'probes_active_socket_unique') || ' UNIQUE (socket);';\nSELECT new FROM tables_map WHERE old = 15 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '\nSTART WITH 1\nINCREMENT BY  1\nMINVALUE 1\nMAXVALUE 9223372036854775807\nCACHE 1;';\n\nSELECT new FROM tables_map WHERE old = 7 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probe_repositories_group_fkey FOREIGN KEY (groups_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE SET NULL ;'';';\n                        \nSELECT new FROM tables_map WHERE old = 10 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probe_repositories_user_fkey FOREIGN KEY (users_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE NO ACTION ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nid integer DEFAULT nextval(''' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '''::regclass) NOT NULL,\nurl text NOT NULL,\ndescription text,\nusers_id integer NOT NULL,\ngroups_id integer,\nkey text);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNED BY ' || res_new_tableQ || '.id;';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (id);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || 'repositories_url_unqiue') || ' UNIQUE (url);';\nSELECT new FROM tables_map WHERE old = 16 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '\nSTART WITH 1\nINCREMENT BY  1\nMINVALUE 1\nMAXVALUE 9223372036854775807\nCACHE 1;';\n\nSELECT new FROM tables_map WHERE old = 13 INTO res_other_table;\nres_defer_table = res_defer_table || CHR(10) || 'res_new_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_new_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'res_other_tableQ = res_new_schemaQ || ''.'' || quote_ident(TEXT(' || res_other_table || '));';\nres_defer_table = res_defer_table || CHR(10) || 'EXECUTE ''ALTER TABLE '' ||  res_new_tableQ  || ''\n                         ADD CONSTRAINT probe_disassembly_fkey FOREIGN KEY (probes_id)\n                        REFERENCES '' ||  res_other_tableQ || '' (id) MATCH SIMPLE\n                        ON UPDATE NO ACTION ON DELETE NO ACTION ;'';';\n                        \nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '(\nid bigint DEFAULT nextval(''' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || '''::regclass) NOT NULL,\npath text NOT NULL,\nprobes_id integer NOT NULL);';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNER TO ' || '"apd_' || var_user || '";';\nEXECUTE 'ALTER SEQUENCE ' || res_new_schemaQ || '.' || quote_ident(res_new_table || '_id_seq') || ' OWNED BY ' || res_new_tableQ || '.id;';\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_pkey') || ' PRIMARY KEY (id);';\n\nEXECUTE 'ALTER TABLE ONLY ' || res_new_tableQ || ' ADD CONSTRAINT ' || quote_ident(res_new_table || '_unique') || ' UNIQUE (probes_id, path);';\nSELECT new FROM tables_map WHERE old = 17 INTO res_new_table;\n                          res_new_tableQ = res_new_schemaQ || '.' || quote_ident(res_new_table);\nEXECUTE 'CREATE TABLE ' || res_new_tableQ || '();';\nEXECUTE 'ALTER TABLE ' || res_new_tableQ || ' OWNER TO ' || '"apd_' || var_user || '";';res_defer_table = res_defer_table || '\n                  END;$BODY2$\n                   LANGUAGE plpgsql VOLATILE\n                   COST 100;';\n                RETURN res_defer_table;\n                    END;$BODY$\n                      LANGUAGE plpgsql VOLATILE\n                      COST 100;/*"1"\tid\tinteger\t\\N\t1\n"1"\targs\ttext\t\\N\t1\n"1"\tdescription\ttext\t\\N\t0\n"1"\tboard\ttext\t\\N\t0\n"2"\ttriple\ttext\t\\N\t0\n"2"\tcompiler_prefix\ttext\t\\N\t0\n"2"\tdescription\ttext\t\\N\t0\n"2"\toptions\tinteger[]\t\\N\t0\n"2"\tactive\tboolean\t\\N\t0\n"2"\tbpf_options\ttext\t\\N\t0\n"3"\tdata\tjsonb\t\\N\t0\n"4"\tid\tinteger\t"nextval(""4"")::regclass"\t1\n"4"\tname\ttext\t\\N\t1\n"4"\toptions\tjsonb\t\\N\t0\n"4"\tgroups_id\tinteger\t\\N\t0\n"4"\tusers_id\tinteger\t\\N\t1\n"4"\tdescription\ttext\t\\N\t0\n"5"\truns_id\tinteger\t\\N\t1\n"5"\tmodule_instances_id\tinteger\t\\N\t1\n"5"\toptions\tjsonb\t\\N\t0\n"5"\tvisible\tboolean\t"false"\t1\n"5"\tname\ttext\t\\N\t1\n"5"\tid\tinteger\t"nextval(""5"")::regclass"\t1\n"6"\tid\tinteger\t"nextval(""6"")::regclass"\t1\n"6"\tmodules_id\tinteger\t\\N\t0\n"6"\tname\ttext\t\\N\t0\n"6"\toptions\tjsonb\t\\N\t0\n"7"\tid\tinteger\t"nextval(""7"")::regclass"\t1\n"7"\tname\ttext\t\\N\t1\n"7"\tdescription\ttext\t\\N\t0\n"8"\tusers_id\tinteger\t\\N\t1\n"8"\tgroups_id\tinteger\t\\N\t1\n"8"\tperm\tinteger\t"0"\t1\n"9"\tusers_id\tinteger\t\\N\t1\n"9"\tticket\ttext\t\\N\t1\n"9"\t"time"\tbigint\t\\N\t0\n"9"\ttype\tinteger\t\\N\t0\n"10"\tid\tinteger\t"nextval(""10"")::regclass"\t1\n"10"\tlogin\ttext\t\\N\t0\n"10"\tlogin_cookie\ttext\t\\N\t0\n"10"\tkey\ttext\t\\N\t1\n"10"\tlast_login\tbigint\t\\N\t0\n"10"\tsalt\ttext\t\\N\t1\n"10"\tattempts\tinteger\t\\N\t0\n"10"\tkeep\tboolean\t\\N\t0\n"10"\tmail\ttext\t\\N\t1\n"10"\tperm\tinteger\t"0"\t1\n"10"\tlocked\tboolean\t"false"\t1\n"10"\tsettings\tjsonb\t\\N\t0\n"11"\tid\tinteger\t"nextval(""11"")::regclass"\t1\n"11"\tname\ttext\t\\N\t1\n"11"\toptions\tjsonb\t\\N\t0\n"11"\tgroups_id\tinteger\t\\N\t0\n"11"\tusers_id\tinteger\t\\N\t1\n"11"\tdescription\ttext\t\\N\t0\n"11"\tlocked\tboolean\t\\N\t0\n"12"\tid\tinteger\t"nextval(""12"")::regclass"\t1\n"12"\tidentifier\ttext\t\\N\t0\n"12"\tsettings\tjsonb\t\\N\t0\n"12"\tprobes_id\tinteger\t\\N\t1\n"13"\tid\tinteger\t"nextval(""13"")::regclass"\t1\n"13"\tlogin\ttext\t\\N\t0\n"13"\tkey\ttext\t\\N\t0\n"13"\tgroups_id\tinteger\t\\N\t0\n"13"\tusers_id\tinteger\t\\N\t1\n"13"\tdescription\ttext\t\\N\t0\n"14"\tsocket\tinteger\t\\N\t1\n"14"\tidentifier\ttext\t\\N\t1\n"14"\tprobes_settings_id\tinteger\t\\N\t0\n"14"\tprobes_id\tinteger\t\\N\t1\n"14"\t"time"\tbigint\t\\N\t0\n"14"\tremote_addr\ttext\t\\N\t0\n"15"\tid\tinteger\t"nextval(""15"")::regclass"\t1\n"15"\turl\ttext\t\\N\t1\n"15"\tdescription\ttext\t\\N\t0\n"15"\tusers_id\tinteger\t\\N\t1\n"15"\tgroups_id\tinteger\t\\N\t0\n"15"\tkey\ttext\t\\N\t0\n"16"\tid\tbigint\t"nextval(""16"")::regclass"\t1\n"16"\tpath\ttext\t\\N\t1\n"16"\tprobes_id\tinteger\t\\N\t1\n*/
