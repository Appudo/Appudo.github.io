{"head":"\n    <style name=\"mstl\">\n        #result span, #header span {\n            display: table-cell;\n            width:120px;\n            border-right:1px solid black;\n            border-top:1px solid black;\n            margin:0;\n            padding:5px;\n            word-break: break-all;\n            white-space: initial;\n            height:100%;\n        }\n\n        #header span {\n            font-weight:bold;\n            padding-bottom:5px;\n            border-top:1px solid black;\n            border-bottom:1px solid black;\n        }\n\n        #header, #result {\n            display:inline-block;\n            border-left:1px solid black;\n            white-space: nowrap;\n        }\n\n        #result {\n            border-bottom:1px solid black;\n        }\n        #result li {\n            list-style-type:none;\n            float:left;\n            clear:both;\n        }\n        #result div {\n            float:right;\n            display:inline-block;\n            width:0px;\n            height:100%;\n            line-height:100%;\n            padding-top:8px;\n            padding-left:5px;\n            margin-right:-5px;\n        }\n        #result a {\n            font-family: symbols;\n            text-decoration: none;\n            color:inherit;\n            margin-right:10px;\n        }\n\n        #result .circle {\n            display: inline-block;\n            border-radius: 50%;\n            width: 13px;\n            height: 14px;\n            background-color: #223560;\n            text-align:center;\n            color: #e2e2e2;\n            font-size: 10px;\n            line-height: 15px;\n            vertical-align: top;\n            font-family: sans, 'Open Sans';\n            font-weight: bold;\n        }\n        .tip {\n            position:relative;\n        }\n        .tip p {\n            pointer-events:none;\n            position:absolute;\n            display: inline-block;\n            z-index: 2;\n            white-space: nowrap;\n            background: #ccc;\n            padding: 8px;\n            transition: opacity 0.5s ease-out;\n            opacity: 0;\n            border:0;\n            color:#223560;\n            font-size:16px;\n            font-family:sans, 'Open Sans';\n            bottom:30px;\n            left:20px;\n            border-radius: 3px;\n            font-weight: bold;\n        }\n\n        .tip:hover p {\n            opacity: 1;\n        }\n    </style>\n","body": {"minit":"<script>minit('dash_remove',['other','content'], []);</script>","misc":"<script>moduleCtx['dash_remove']=function(){\n    return {\n        hasAsk:false,\n        lbl_txt:'',\n        head_txt:'',\n        dashes:[],\n        renderFull : function() {\n            var data = this.dashes;\n            $('#result').text('');\n            for(var i = 0; i < data.length; i++) {\n                this.renderDash(data[i])\n            }\n        },\n        renderDash : function(item) {\n            var i18n = i18nCtx[this._module].rem;\n            $('#result').append('<li><span>' + item.aid + '</span><span>' + item.host + '</span><span>' + item.id + '</span><span>' + item.cid + '</span></li><div>' +\n                                '<a class=\"tip\" href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'ask\\',[\\'' + item.aid + '\\',\\'' + item.host  + '\\']);\">&#xF057<p>' + i18n.head + '</p></a>' +\n                                '<a class=\"circle tip\" href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'askDash\\',[\\'' + item.aid + '\\']);\">D<p>' + i18n.dn + '</p></a>' +\n                                '<a class=\"circle tip\" href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'askCert\\',[\\'' + item.cid + '\\']);\">C<p>' + i18n.cn + '</p></a>' +\n                                '<a class=\"circle tip\" href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'askPwd\\',[\\'' + item.aid + '\\']);\">P<p>' + i18n.pwd + '</p></a>' +\n                                '<a class=\"circle tip\" href=\"javascript:mCall(' + '\\'' + this._module + '\\'' + ',\\'askEdit\\',[\\'' + item.aid + '\\']);\">E<p>' + i18n.ed + '</p></a>' +\n                                '</div>')\n        },\n        listDashes : function() {\n            var _this = this;\n            showLoad();\n            $.post( '/server/', {data:'{\"cmd\":1}'}, function(res) {\n                hideLoad();\n                var data = validateRes(res);\n                if(!data) {\n                    return;\n                }\n                _this.dashes = data;\n                _this.renderFull();\n            });\n        },\n        doRemove : function(id) {\n            var _this = this;\n            showLoad();\n            $.post( '/server/', {data:'{\"cmd\":3,\"data\":' + JSON.stringify(JSON.stringify({d:id})) + '}'}, function(res) {\n                hideLoad();\n                var data = validateRes(res);\n                if(!data) {\n                    return;\n                }\n                if(data.r == 0) {\n                    _this.dashes = _this.dashes.filter(function(obj) {\n                        return obj.aid != id;\n                    });\n                    _this.renderFull();\n                    _this.hideAsk();\n                } else {\n                    // TODO error\n                }\n            });\n        },\n        askDash : function(id) {\n            var i18n = i18nCtx[this._module].rem;\n            var _this = this;\n            showLoad();\n            $.post( '/server/', {data:JSON.stringify({cmd:17,data:id})}, function(res) {\n                hideLoad();\n                var data = validateRes(res);\n                if(data.r == 0)\n                    _this._ask('', i18n.dn + ' DashID: ' + id, data.d, function(){_this.hideAsk.call(_this);}, true);\n            });\n        },\n        askPwd : function(id) {\n            console.log(id)\n            var i18n = i18nCtx[this._module].rem;\n            var _this = this;\n            showLoad();\n            $.post( '/server/', {data:JSON.stringify({cmd:19,data:id})}, function(res) {\n                hideLoad();\n                var data = validateRes(res);\n                if(data.r == 0) {\n                    var frma = $('#frma');\n                    $('#frma').attr('style','width:100%;margin-top:10px;');\n                    frma.html('<input style=\"width:100%;\" id=\"pwd\" name=\"pwd\" type=\"password\" required>');\n                    _this._ask('', i18n.pwd + ' DashID: ' + id, i18n.pwf + ' \"' + data.d.n + '\" :', function(){\n                        showLoad();\n                        var v = $('#pwd').val();\n                        $.post( '/server/', {data:JSON.stringify({cmd:21,data:'{\"id\":'+id+',\"pwd\":' + JSON.stringify(v) + '}'})}, function(res) {\n                            hideLoad();\n                            data = validateRes(res);\n                            if(data.r == 0) {\n                                _this.hideAsk.call(_this);\n                            } else {\n                                // TODO error\n                            }\n                        });\n                    });\n                }\n            });\n        },\n        askEdit : function(id) {\n            var i18n = i18nCtx[this._module].rem;\n            var _this = this;\n            var frma = $('#frma');\n            frma.html('<input style=\"vertical-align:bottom;\" id=\"ed\" name=\"ed\" type=\"checkbox\">');\n            _this._ask('', i18n.ed + ' DashID: ' + id, i18n.edl, function(){\n                showLoad();\n                var v = $('#ed').is(':checked');\n                $.post( '/server/', {data:JSON.stringify({cmd:20,data:'{\"id\":'+id+',\"ed\":' + v + '}'})}, function(res) {\n                    hideLoad();\n                    data = validateRes(res);\n                    if(data.r == 0) {\n                        _this.hideAsk.call(_this);\n                    } else {\n                        // TODO error\n                    }\n                });\n            });\n        },\n        askCert : function(id) {\n            var i18n = i18nCtx[this._module].rem;\n            var _this = this;\n            showLoad();\n            $.post( '/server/', {data:JSON.stringify({cmd:18,data:id})}, function(res) {\n                hideLoad();\n                var data = validateRes(res);\n                if(data.r == 0)\n                    _this._ask('', i18n.cn + ' CertID: ' + id, data.d, function(){_this.hideAsk.call(_this);}, true);\n            });\n        },\n        _ask : function(lbl, head, txt, f, noc) {\n            var _this = this;\n            var rem = $('#theRemove');\n            var val = $('#dval');\n            var tlbl = $('#dlbl');\n            var rej = $('#rej');\n            var dhead = $('#dhead');\n            var ok = $('#ok');\n            rej.css('display', 'inline-block');\n            if(noc) {\n                rej.css('display', 'none');\n            }\n            rem.css('display', '');\n            dhead.text(head);\n            tlbl.text(lbl);\n            val.text(txt);\n            disableMain();\n            ok.unbind('click');\n            ok.click(f);\n            this.hasAsk = true;\n            rem.focus();\n        },\n        ask : function(id, host) {\n            var _this = this;\n            this._ask(this.lbl_txt, this.head_txt, host, function(){_this.doRemove.call(_this, id);});\n        },\n        hideAsk : function() {\n            if(this.hasAsk) {\n                $('#frma').html('');\n                $('#frma').attr('style','display:inline-block;');\n                $('#theRemove').css('display', 'none');\n                this.hasAsk = false;\n                enableMain();\n            }\n        },\n        run : function() {\n            var _this = this;\n            this.lbl_txt = $('#dlbl').text();\n            this.head_txt = $('#dhead').text();\n            this.listDashes();\n            $('#rej').click(function(){_this.hideAsk.call(_this);});\n        }\n    }\n}();</script>","other":"\n    <div id=\"theRemove\" style=\"display:none;\" class=\"modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"disableModal\" aria-hidden=\"true\">\n        <div class=\"dlg\">\n            <div class=\"ltop\">\n                <span id=\"dhead\">{{rem.rly}}</span>\n            </div>\n            <div style=\"margin-top:20px;\">\n                <label id=\"dlbl\" style=\"margin-right:5px;\">{{rem.dsh}}</label><span id=\"dval\"></span>\n                <div id=\"frma\" style=\"display:inline-block;\"></div>\n            </div>\n            <div class=\"frm btn\">\n                <button type=\"button\" name=\"ok\" id=\"ok\">{{rem.sub}}</button>\n                <span style=\"width:20px;display:inline-block;\"></span>\n                <button type=\"button\" name=\"rej\" id=\"rej\">{{rem.rej}}</button>\n            </div>\n        </div>\n    </div>\n","content":"\n    <h3>{{rem.head}}</h3>\n    <pre>{{rem.txt}}</pre>\n    <div id=\"header\"><span>DashID</span><span>Domain</span><span>DomainID</span><span>CertID</span></div>\n    <div>\n        <ul id=\"result\">\n\n        </ul>\n    </div>\n"}}
